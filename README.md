# DNS filter
一个脑子有洞的，用于在弱IPV6网络下实现“IPV4优先”规则的DNS过滤器。

有些时候，在DNS查询中，我们希望A记录和AAAA记录都有的时候，系统会自动选择A记录，而不是AAAA记录。

但是系统就是很乐意跟我们作对。

所以我写了个小插件，来调教调皮的系统。



### 工作原理

众所周知，在一次默认的DNS查询操作中，操作系统会执行三次DNS查询：

一是查询DNS服务器地址的PTR（这不重要）

二是查询目标的A记录

三是查询目标的AAAA记录

然后系统会把这三次查询聚合输出，就跟只做了一次查询一样。



我的做法是，在第三次查询时，尝试验证查询的字符串有无A记录

如果有，就删掉第三次查询的全部AAAA记录，然后返回。

如果没有，就返回第三次查询结果。



### 启动方法

在扩展什么的都安装好了的，直接python start.sh

退出方法就ctrl + c

（难道你不应该写一个service吗？）



### 开源协议

MIT



代码写得很烂哈哈哈，纯菜鸡
